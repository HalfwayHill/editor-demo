import{d as z,r as le,o as oe,a,c as m,b as k,n as X,u as C,e as K,_ as H,f as j,g as R,h as y,w as g,i as S,F as M,j as P,k as q,l as A,m as pe,t as J,p as Q,q as ie,s as G,v as fe,x as Z,y as he,z as re,A as _e,B as be,E as ge,C as ye,D as Se}from"./index-d4203bb3.js";async function ve(s,e=[]){const t=l=>new Promise(o=>{s.classList.add(l.value,"animated");const w=()=>{s.removeEventListener("animationend",w),s.removeEventListener("animationcancel",w),s.classList.remove(l.value,"animated"),o()};s.addEventListener("animationend",w),s.addEventListener("animationcancel",w)});for(let l=0,o=e.length;l<o;l++)await t(e[l])}function me(s,e=[]){const t=["color","backgroundColor","textAlign","opacity","lineHeight","fontWeight","borderColor"],l={};return Object.keys(s).forEach(o=>{e.includes(o)||(o!="rotate"?(l[o]=s[o],t.includes(o)||(l[o]+="px")):l.transform=o+"("+s[o]+"deg)")}),l}const te={redirect(s){s&&(window.location.href=s)},alert(s){s&&alert(s)}},ue=[{key:"redirect",label:"跳转事件",event:te.redirect,param:""},{key:"alert",label:"alert 事件",event:te.alert,param:""}],we=z({__name:"ComponentWrapper",props:{config:{}},setup(s){const e=s,t=le(null);oe(()=>{ve(t,e.config.animations)});const l=()=>{const o=e.config.events;Object.keys(o).forEach(w=>{te[w](o[w])})};return(o,w)=>(a(),m("div",{onClick:l,ref_key:"wrapperDom",ref:t},[(a(),k(K(o.config.component),{class:"component",style:X(C(me)(o.config.style)),propValue:o.config.propValue},null,8,["style","propValue"]))],512))}});const xe=H(we,[["__scopeId","data-v-f1e151d3"]]),Ce={key:0,class:"bg"},Ie=z({__name:"Preview",props:{show:{type:Boolean}},emits:["update:show"],setup(s,{emit:e}){const t=j.editorStore.editorState,l=()=>{e("update:show",!1)};return(o,w)=>{const x=R("el-button");return o.show?(a(),m("div",Ce,[y(x,{onClick:l,class:"close"},{default:g(()=>[A("关闭")]),_:1}),S("div",{class:"canvas",style:X({width:C(t).canvasStyleData.width+"px",height:C(t).canvasStyleData.height+"px"})},[(a(!0),m(M,null,P(C(t).componentData,(h,u)=>(a(),k(xe,{key:u,config:h},null,8,["config"]))),128))],4)])):q("",!0)}}});const ke=H(Ie,[["__scopeId","data-v-056676b2"]]),Ve=z({__name:"Modal",props:{show:{type:Boolean}},emits:["update:show"],setup(s,{emit:e}){const t=()=>{e("update:show")},l=o=>{o.stopPropagation()};return(o,w)=>o.show?(a(),m("div",{key:0,class:"modal-bg",onClick:t},[S("div",{class:"fadeInLeft animated modal",onClick:l},[pe(o.$slots,"default",{},void 0,!0)])])):q("",!0)}});const ce=H(Ve,[["__scopeId","data-v-30ac208d"]]),De={rotate:"",opacity:1},ne=[{id:0,component:"v-text",label:"文字",propValue:"文字",icon:"Edit",animations:[],events:{},style:{top:0,left:0,width:200,height:33,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:""}},{id:0,component:"v-button",label:"按钮",propValue:"按钮",icon:"Crop",animations:[],events:{},style:{top:0,left:0,width:100,height:34,borderWidth:"",borderColor:"",borderRadius:"",fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{id:0,component:"Picture",label:"图片",icon:"PictureRounded",propValue:Le("../assets/title.jpg"),animations:[],events:{},style:{top:0,left:0,width:300,height:200,borderRadius:""}}];ne.forEach(s=>{s.style={...s.style,...De}});function Le(s){return new URL(s,import.meta.url).href}const Ne={class:"component-list"},Oe=["data-index"],Ue=z({__name:"ComponentList",setup(s){const e=t=>{t.dataTransfer.setData("index",t.target.dataset.index)};return(t,l)=>(a(),m("div",Ne,[(a(!0),m(M,null,P(C(ne),(o,w)=>(a(),m("div",{key:w,class:"item",draggable:"true",onDragstart:l[0]||(l[0]=x=>e(x)),"data-index":w},[(a(),k(K(o.icon),{class:"icon"})),S("span",null,J(o.label),1)],40,Oe))),128))]))}});const Ee=H(Ue,[["__scopeId","data-v-c063c578"]]),Re={class:"attr-list"},Ae=z({__name:"AttrList",setup(s){const e=j.editorStore,t=Q({excludes:["Picture"],options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],map:{left:"x 坐标",top:"y 坐标",height:"高",width:"宽",color:"颜色",backgroundColor:"背景色",borderWidth:"边框宽度",borderColor:"边框颜色",borderRadius:"边框半径",fontSize:"字体大小",fontWeight:"字体粗细",lineHeight:"行高",letterSpacing:"字间距",textAlign:"对齐方式",opacity:"透明度",rotate:"旋转角度"}}),l=ie(()=>e.editorState.curComponent?Object.keys(e.editorState.curComponent.style):[]),o=ie(()=>e.editorState.curComponent);return(w,x)=>{const h=R("el-color-picker"),u=R("el-option"),f=R("el-select"),r=R("el-input"),c=R("el-form-item"),v=R("el-form");return a(),m("div",Re,[y(v,null,{default:g(()=>[(a(!0),m(M,null,P(l.value,(n,L)=>(a(),k(c,{key:L,label:t.map[n]},{default:g(()=>[n=="borderColor"?(a(),k(h,{key:0,modelValue:o.value.style[n],"onUpdate:modelValue":_=>o.value.style[n]=_},null,8,["modelValue","onUpdate:modelValue"])):n=="color"?(a(),k(h,{key:1,modelValue:o.value.style[n],"onUpdate:modelValue":_=>o.value.style[n]=_},null,8,["modelValue","onUpdate:modelValue"])):n=="backgroundColor"?(a(),k(h,{key:2,modelValue:o.value.style[n],"onUpdate:modelValue":_=>o.value.style[n]=_},null,8,["modelValue","onUpdate:modelValue"])):n=="textAlign"?(a(),k(f,{key:3,modelValue:o.value.style[n],"onUpdate:modelValue":_=>o.value.style[n]=_},{default:g(()=>[(a(!0),m(M,null,P(t.options,_=>(a(),k(u,{key:_.value,label:_.label,value:_.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(a(),k(r,{key:4,type:"number",modelValue:o.value.style[n],"onUpdate:modelValue":_=>o.value.style[n]=_},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128)),o.value&&o.value.propValue&&!t.excludes.includes(o.value.component)?(a(),k(c,{key:0,label:"内容"},{default:g(()=>[y(r,{type:"textarea",modelValue:o.value.propValue,"onUpdate:modelValue":x[0]||(x[0]=n=>o.value.propValue=n)},null,8,["modelValue"])]),_:1})):q("",!0)]),_:1})])}}});const Me=H(Ae,[["__scopeId","data-v-b2c12231"]]),Pe=z({__name:"ContextMenu",setup(s){const e=j.editorStore,t=()=>{e.deleteComponent(),e.recordSnapshot()},l=()=>{e.upComponent(),e.recordSnapshot()},o=()=>{e.downComponent(),e.recordSnapshot()},w=()=>{e.topComponent(),e.recordSnapshot()},x=()=>{e.bottomComponent(),e.recordSnapshot()};return(h,u)=>G((a(),m("div",{class:"contextmenu",style:X({top:C(e).editorState.menuTop+"px",left:C(e).editorState.menuLeft+"px"})},[S("ul",null,[S("li",{onClick:t},"删除"),S("li",{onClick:w},"置顶"),S("li",{onClick:x},"置底"),S("li",{onClick:l},"上移"),S("li",{onClick:o},"下移")])],4)),[[fe,C(e).editorState.menuShow]])}});function $e(s){return{all:s=s||new Map,on:function(e,t){var l=s.get(e);l?l.push(t):s.set(e,[t])},off:function(e,t){var l=s.get(e);l&&(t?l.splice(l.indexOf(t)>>>0,1):s.set(e,[]))},emit:function(e,t){var l=s.get(e);l&&l.slice().map(function(o){o(t)}),(l=s.get("*"))&&l.slice().map(function(o){o(e,t)})}}}const W=$e(),ze={class:"mark-line"},Be=z({__name:"MarkLine",setup(s){const e=j.editorStore,t=le(),l=Q({lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1},editor:null});oe(()=>{l.editor=document.querySelector("#editor"),W.on("move",f=>{w(f.dragNode,f.isDownward,f.isRightward)}),W.on("unMove",()=>{o()})});const o=()=>{Object.keys(l.lineStatus).forEach(f=>{l.lineStatus[f]=!1})},w=(f,r,c)=>{const v=document.querySelectorAll(".shape"),n=u(f),L=n.width/2,_=n.height/2;o(),v.forEach(V=>{if(V==f)return;const{top:I,height:U,bottom:N,left:p,width:d,right:b}=u(V),E=d/2,$=U/2;if(t.value!==void 0){const O={top:[{isNearly:h(n.top,I),lineNode:t.value.xt[0],line:"xt",dragShift:I,lineShift:I},{isNearly:h(n.bottom,I),lineNode:t.value.xt[0],line:"xt",dragShift:I-n.height,lineShift:I},{isNearly:h(n.top+_,I+$),lineNode:t.value.xc[0],line:"xc",dragShift:I+$-_,lineShift:I+$},{isNearly:h(n.top,N),lineNode:t.value.xb[0],line:"xb",dragShift:N,lineShift:N},{isNearly:h(n.bottom,N),lineNode:t.value.xb[0],line:"xb",dragShift:N-n.height,lineShift:N}],left:[{isNearly:h(n.left,p),lineNode:t.value.yl[0],line:"yl",dragShift:p,lineShift:p},{isNearly:h(n.right,p),lineNode:t.value.yl[0],line:"yl",dragShift:p-n.width,lineShift:p},{isNearly:h(n.left+L,p+E),lineNode:t.value.yc[0],line:"yc",dragShift:p+E-L,lineShift:p+E},{isNearly:h(n.left,b),lineNode:t.value.yr[0],line:"yr",dragShift:b,lineShift:b},{isNearly:h(n.right,b),lineNode:t.value.yr[0],line:"yr",dragShift:b-n.width,lineShift:b}]},B=[];Object.keys(O).forEach(Y=>{O[Y].forEach(i=>{i.isNearly&&(e.setShapePosStyle({key:Y,value:i.dragShift}),i.lineNode.style[Y]=`${i.lineShift}px`,B.push(i.line))})}),B.length&&x(B,r,c)}})},x=(f,r,c)=>{c?f.includes("yr")?l.lineStatus.yr=!0:f.includes("yc")?l.lineStatus.yc=!0:f.includes("yl")&&(l.lineStatus.yl=!0):f.includes("yl")?l.lineStatus.yl=!0:f.includes("yc")?l.lineStatus.yc=!0:f.includes("yr")&&(l.lineStatus.yr=!0),r?f.includes("xb")?l.lineStatus.xb=!0:f.includes("xc")?l.lineStatus.xc=!0:f.includes("xt")&&(l.lineStatus.xt=!0):f.includes("xt")?l.lineStatus.xt=!0:f.includes("xc")?l.lineStatus.xc=!0:f.includes("xb")&&(l.lineStatus.xb=!0)},h=(f,r)=>Math.abs(f-r)<=l.diff,u=f=>{let{top:r,height:c,bottom:v,left:n,width:L,right:_}=f.getBoundingClientRect();const V=l.editor.getBoundingClientRect();return n-=V.left,r-=V.top,_-=V.left,v-=V.top,{top:r,height:c,bottom:v,left:n,width:L,right:_}};return(f,r)=>(a(),m("div",ze,[(a(!0),m(M,null,P(l.lines,c=>G((a(),m("div",{key:c,class:Z(["line",c.includes("x")?"xline":"yline"]),ref_for:!0,ref:t.value},null,2)),[[fe,l.lineStatus[c]||!1]])),128))]))}});const Ye=H(Be,[["__scopeId","data-v-56c4322f"]]),He=["onMousedown"],Xe=z({__name:"Shape",props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object},defaultStyle:{require:!0,type:Object},zIndex:{require:!0,type:[Number,String]}},setup(s){const e=s,t=j.editorStore,l=le(),o=Q({pointList:["t","r","b","l","lt","rt","lb","rb"],directionKey:{t:"n",b:"s",l:"w",r:"e"}});oe(()=>{W.on("runAnimation",()=>{e.element===t.getCurComponent&&ve(l,t.getCurComponent.animations)})});const w=r=>{var p,d;const c=(p=e.defaultStyle)==null?void 0:p.height,v=(d=e.defaultStyle)==null?void 0:d.width,n=/t/.test(r),L=/b/.test(r),_=/l/.test(r),V=/r/.test(r);let I=0,U=0;return r.length===2?(I=_?0:v,U=n?0:c):((n||L)&&(I=v/2,U=n?0:c),(_||V)&&(I=_?0:v,U=Math.floor(c/2))),{marginLeft:V?"-4px":"-3px",marginTop:"-3px",left:`${I}px`,top:`${U}px`,cursor:r.split("").reverse().map(b=>o.directionKey[b]).join("")+"-resize"}},x=r=>{var N;((N=e.element)==null?void 0:N.component)!="v-text"&&r.preventDefault(),r.stopPropagation(),t.setCurComponent({component:e.element,zIndex:e.zIndex});const c={...e.defaultStyle},v=r.clientY,n=r.clientX,L=Number(c.top),_=Number(c.left);let V=!1;const I=p=>{V=!0;const d=p.clientX,b=p.clientY;c.top=b-v+L,c.left=d-n+_,t.setShapeStyle(c),he(()=>{W.emit("move",{dragNode:l.value,isDownward:b-v>0,isRightward:d-n>0})})},U=()=>{V&&t.recordSnapshot(),W.emit("unMove"),document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",U)};document.addEventListener("mousemove",I),document.addEventListener("mouseup",U)},h=r=>{r.stopPropagation(),r.preventDefault(),t.hideContextMenu()},u=r=>{const c=window.event;c==null||c.stopPropagation(),c==null||c.preventDefault();const v={...e.defaultStyle},n=Number(v.height),L=Number(v.width),_=Number(v.top),V=Number(v.left),I=c.clientX,U=c.clientY;let N=!1;const p=b=>{N=!0;const E=b.clientX,O=b.clientY-U,B=E-I,Y=/t/.test(r),i=/b/.test(r),D=/l/.test(r),T=/r/.test(r),F=n+(Y?-O:i?O:0),se=L+(D?-B:T?B:0);v.height=F>0?F:0,v.width=se>0?se:0,v.left=V+(D?B:0),v.top=_+(Y?O:0),t.setShapeStyle(v)},d=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",d),N&&t.recordSnapshot()};document.addEventListener("mousemove",p),document.addEventListener("mouseup",d)},f=r=>{r.stopPropagation(),r.preventDefault();let c=r.target,v=r.offsetY,n=r.offsetX;for(;!c.className.includes("editor");)n+=c.offsetLeft,v+=c.offsetTop,c=c.parentNode;t.showContextMenu({top:v,left:n})};return(r,c)=>(a(),m("div",{ref_key:"thisRef",ref:l,class:Z(["shape",{active:s.active}]),onClick:h,onMousedown:x,onContextmenu:f},[(a(!0),m(M,null,P(s.active?o.pointList:[],(v,n)=>(a(),m("div",{class:"shape-point",onMousedown:L=>u(v),key:n,style:X(w(v))},null,44,He))),128)),pe(r.$slots,"default",{},void 0,!0)],34))}});const je=H(Xe,[["__scopeId","data-v-a4f6b3bb"]]),We=z({__name:"EditorComponent",props:{isEdit:{type:Boolean,default:!0}},setup(s){const e=j.editorStore,t=(x,h)=>{const u={...x};return u.width&&(u.width+="px"),u.height&&(u.height+="px"),u.top&&(u.top+="px"),u.left&&(u.left+="px"),u.rotate&&(u.transform="rotate("+u.rotate+"deg)"),u.zIndex=h,u},l=x=>me(x,["top","left","width","height","zIndex","rotate"]),o=(x,h)=>{x.propValue=h,e.setShapeStyle({height:w(x,h)})},w=(x,h)=>{let{lineHeight:u,fontSize:f,height:r}=x.style;u===""&&(u=1.5);const c=h.split(`
`).length*u*f;return r>c?r:c};return(x,h)=>(a(),m("div",{class:Z(["editor",{edit:s.isEdit}]),id:"editor",style:X({width:C(e).editorState.canvasStyleData.width+"px",height:C(e).editorState.canvasStyleData.height+"px"})},[(a(!0),m(M,null,P(C(e).editorState.componentData,(u,f)=>(a(),k(je,{defaultStyle:u.style,style:X(t(u.style,f)),key:u.id,active:u===C(e).editorState.curComponent,element:u,zIndex:f},{default:g(()=>[u.component!="v-text"?(a(),k(K(u.component),{key:0,class:"component",style:X(l(u.style)),propValue:u.propValue},null,8,["style","propValue"])):(a(),k(K(u.component),{key:1,class:"component",style:X(l(u.style)),propValue:u.propValue,onInput:o,element:u},null,40,["style","propValue","element"]))]),_:2},1032,["defaultStyle","style","active","element","zIndex"]))),128)),y(Pe),y(Ye)],6))}});const qe=H(We,[["__scopeId","data-v-42531490"]]),de=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedInRight"},{label:"光速从左进入",value:"lightSpeedInLeft"},{label:"光速从右退出",value:"lightSpeedOutRight"},{label:"光速从左退出",value:"lightSpeedOutLeft"},{label:"Y轴旋转",value:"flip"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];let Te=0;function ee(){return Te++}const ae=s=>(ye("data-v-5c06743b"),s=s(),Se(),s),Fe={class:"home"},Je=ae(()=>S("label",{for:"input",class:"insert"},"插入图片",-1)),Ke={class:"canvas-config"},Ge=ae(()=>S("span",null,"画布大小",-1)),Qe=ae(()=>S("span",null,"*",-1)),Ze={class:"left"},et={class:"center"},tt={class:"right"},lt={key:1,class:"placeholder"},ot={key:0,class:"div-animation"},nt={key:1,class:"placeholder"},at={key:0,class:"div-events"},st={key:1,class:"placeholder"},it={class:"el-scrollbar-view"},rt=["onMouseover","onClick"],ut=z({__name:"Home",setup(s){const e=j.editorStore,t=Q({isShowPreview:!1,isShowAnimation:!1,isShowEvent:!1,activeName:"attr",animationClassData:de,animationActiveName:"进入",showAnimatePanel:!1,reSelectAnimateIndex:void 0,hoverPreviewAnimate:"",eventURL:"",eventActiveName:"redirect",eventList:ue}),l=()=>{localStorage.getItem("canvasData")&&e.setComponentData(o(JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&e.setCanvasStyle(o(JSON.parse(localStorage.getItem("canvasStyle"))))},o=p=>(p.forEach((d,b)=>{d.id=ee()}),t),w=p=>{p.preventDefault(),p.stopPropagation();const d=_e.cloneDeep(ne[p.dataTransfer.getData("index")]);d.style.top=p.offsetY,d.style.left=p.offsetX,d.id=ee(),e.addComponent(d),e.recordSnapshot()},x=p=>{p.preventDefault(),p.dataTransfer.dropEffect="copy"},h=()=>{e.setCurComponent({component:null,zIndex:null}),e.hideContextMenu()},u=()=>{e.undo()},f=()=>{e.redo()},r=p=>{const d=p.target.files[0];if(!d.type.includes("image")){be("只能插入图片","error");return}const b=new FileReader;b.onload=E=>{const $=E.target.result,O=new Image;O.onload=()=>{e.addComponent({id:ee(),component:"Picture",label:"图片",icon:"",propValue:$,animations:[],events:[],style:{top:0,left:0,width:O.width,height:O.height,rotate:""}})},O.src=$},b.readAsDataURL(d)},c=p=>{e.addAnimation(p),t.isShowAnimation=!1},v=()=>{W.emit("runAnimation")},n=p=>{e.removeAnimation(p)},L=()=>{t.isShowPreview=!0,e.setEditMode("read")},_=()=>{e.setEditMode("edit")},V=()=>{localStorage.setItem("canvasData",JSON.stringify(e.editorState.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(e.editorState.canvasStyleData)),ge.success("保存成功")},I=()=>{e.setComponentData([])},U=(p,d)=>{t.isShowEvent=!1,e.addEvent({event:p,param:d})},N=p=>{e.removeEvent(p)};return l(),(p,d)=>{const b=R("el-button"),E=R("el-tab-pane"),$=R("el-tag"),O=R("el-tabs"),B=R("el-scrollbar"),Y=R("el-input");return a(),m("div",Fe,[S("header",null,[y(b,{onClick:u},{default:g(()=>[A("撤消")]),_:1}),y(b,{onClick:f},{default:g(()=>[A("重做")]),_:1}),Je,S("input",{type:"file",onChange:r,id:"input",hidden:""},null,32),y(b,{onClick:L,style:{"margin-left":"10px"}},{default:g(()=>[A("预览")]),_:1}),y(b,{onClick:V},{default:g(()=>[A("保存")]),_:1}),y(b,{onClick:I},{default:g(()=>[A("清空画布")]),_:1}),S("div",Ke,[Ge,G(S("input",{"onUpdate:modelValue":d[0]||(d[0]=i=>C(e).editorState.canvasStyleData.width=i)},null,512),[[re,C(e).editorState.canvasStyleData.width]]),Qe,G(S("input",{"onUpdate:modelValue":d[1]||(d[1]=i=>C(e).editorState.canvasStyleData.height=i)},null,512),[[re,C(e).editorState.canvasStyleData.height]])])]),S("main",null,[S("section",Ze,[y(Ee)]),S("section",et,[S("div",{class:"content",onDrop:w,onDragover:x,onClick:h},[y(qe)],32)]),S("section",tt,[y(O,{modelValue:t.activeName,"onUpdate:modelValue":d[4]||(d[4]=i=>t.activeName=i),type:"card"},{default:g(()=>[y(E,{label:"属性",name:"attr"},{default:g(()=>[C(e).editorState.curComponent?(a(),k(Me,{key:0})):(a(),m("p",lt,"请选择组件"))]),_:1}),y(E,{label:"动画",name:"animation"},{default:g(()=>[C(e).editorState.curComponent?(a(),m("div",ot,[y(b,{onClick:d[2]||(d[2]=i=>{t.isShowAnimation=!0})},{default:g(()=>[A("添加动画")]),_:1}),y(b,{onClick:v},{default:g(()=>[A("预览动画")]),_:1}),S("div",null,[(a(!0),m(M,null,P(C(e).editorState.curComponent.animations,(i,D)=>(a(),k($,{key:D,closable:"",onClose:T=>n(D)},{default:g(()=>[A(J(i.label),1)]),_:2},1032,["onClose"]))),128))])])):(a(),m("p",nt,"请选择组件"))]),_:1}),y(E,{label:"事件",name:"events"},{default:g(()=>[C(e).editorState.curComponent?(a(),m("div",at,[y(b,{onClick:d[3]||(d[3]=i=>t.isShowEvent=!0)},{default:g(()=>[A("添加事件")]),_:1}),S("div",null,[(a(!0),m(M,null,P(Object.keys(C(e).editorState.curComponent.events),i=>(a(),k($,{key:i,closable:"",onClose:D=>N(i)},{default:g(()=>[A(J(i),1)]),_:2},1032,["onClose"]))),128))])])):(a(),m("p",st,"请选择组件"))]),_:1})]),_:1},8,["modelValue"])])]),y(ce,{show:t.isShowAnimation,"onUpdate:show":d[6]||(d[6]=i=>t.isShowAnimation=i)},{default:g(()=>[y(O,{type:"card",modelValue:t.animationActiveName,"onUpdate:modelValue":d[5]||(d[5]=i=>t.animationActiveName=i)},{default:g(()=>[(a(!0),m(M,null,P(C(de),i=>(a(),k(E,{key:i.label,label:i.label,name:i.label},{default:g(()=>[y(B,{class:"animate-container"},{default:g(()=>[S("div",it,[(a(!0),m(M,null,P(i.children,(D,T)=>(a(),m("div",{class:"animate",key:T,onMouseover:F=>t.hoverPreviewAnimate=D.value,onClick:F=>c(D)},[S("div",{class:Z([t.hoverPreviewAnimate===D.value&&"animate__animated animate__"+D.value])},J(D.label),3)],40,rt))),128))])]),_:2},1024)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["show"]),y(ce,{show:t.isShowEvent,"onUpdate:show":d[8]||(d[8]=i=>t.isShowEvent=i)},{default:g(()=>[y(O,{modelValue:t.eventActiveName,"onUpdate:modelValue":d[7]||(d[7]=i=>t.eventActiveName=i)},{default:g(()=>[(a(!0),m(M,null,P(C(ue),i=>(a(),k(E,{key:i.key,label:i.label,name:i.key,style:{padding:"0 20px"}},{default:g(()=>[i.key=="redirect"?(a(),k(Y,{key:0,modelValue:i.param,"onUpdate:modelValue":D=>i.param=D,type:"textarea",placeholder:"请输入完整的 URL"},null,8,["modelValue","onUpdate:modelValue"])):q("",!0),i.key=="alert"?(a(),k(Y,{key:1,modelValue:i.param,"onUpdate:modelValue":D=>i.param=D,type:"textarea",placeholder:"请输入要 alert 的内容"},null,8,["modelValue","onUpdate:modelValue"])):q("",!0),y(b,{style:{"margin-top":"20px"},onClick:D=>U(i.key,i.param)},{default:g(()=>[A("确定")]),_:2},1032,["onClick"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["show"]),y(ke,{show:t.isShowPreview,"onUpdate:show":d[9]||(d[9]=i=>t.isShowPreview=i),onChange:_},null,8,["show"])])}}});const dt=H(ut,[["__scopeId","data-v-5c06743b"]]);export{dt as default};
