import{d as z,r as ce,o as le,a as o,c as v,b as I,n as X,u as C,e as K,_ as B,f as j,g as E,h as b,w as _,i as g,F as R,j as M,k as T,l as A,m as de,t as J,p as Q,q as se,s as G,v as pe,x as Z,y as ve,z as ie,A as _e,B as he,E as be,C as ge,D as ye}from"./index-a8db053a.js";async function fe(s,e=[]){if(s){const t=r=>new Promise(l=>{s.classList.add("animate__animated","animate__"+r.value);const y=()=>{s.removeEventListener("animationend",y),s.removeEventListener("animationcancel",y),s.classList.remove("animate__animated","animate__"+r.value),l()};s.addEventListener("animationend",y),s.addEventListener("animationcancel",y)});for(let r=0,l=e.length;r<l;r++)await t(e[r])}else console.log("runAnimation el为空")}function me(s,e=[]){const t=["color","backgroundColor","textAlign","opacity","lineHeight","fontWeight","borderColor"],r={};return Object.keys(s).forEach(l=>{e.includes(l)||(l!="rotate"?(r[l]=s[l],t.includes(l)||(r[l]+="px")):r.transform=l+"("+s[l]+"deg)")}),r}const te={redirect(s){s&&(window.location.href=s)},alert(s){s&&alert(s)}},Se=[{key:"redirect",label:"跳转事件",event:te.redirect,param:""},{key:"alert",label:"alert 事件",event:te.alert,param:""}],we=z({__name:"ComponentWrapper",props:{config:{}},setup(s){const e=s,t=ce();le(()=>{t.value!==void 0&&fe(t.value,e.config.animations)});const r=()=>{const l=e.config.events;Object.keys(l).forEach(y=>{te[y](l[y])})};return(l,y)=>(o(),v("div",{onClick:r,ref_key:"wrapperDom",ref:t},[(o(),I(K(l.config.component),{class:"component",style:X(C(me)(l.config.style)),propValue:l.config.propValue},null,8,["style","propValue"]))],512))}});const xe=B(we,[["__scopeId","data-v-f6fda919"]]),Ce={key:0,class:"bg"},Ie=z({__name:"Preview",props:{show:{type:Boolean}},emits:["update:show"],setup(s,{emit:e}){const t=j.editorStore.editorState,r=()=>{e("update:show",!1)};return(l,y)=>{const w=E("el-button");return l.show?(o(),v("div",Ce,[b(w,{onClick:r,class:"close"},{default:_(()=>[A("关闭")]),_:1}),g("div",{class:"canvas",style:X({width:C(t).canvasStyleData.width+"px",height:C(t).canvasStyleData.height+"px"})},[(o(!0),v(R,null,M(C(t).componentData,(k,n)=>(o(),I(xe,{key:n,config:k},null,8,["config"]))),128))],4)])):T("",!0)}}});const ke=B(Ie,[["__scopeId","data-v-056676b2"]]),Ve=z({__name:"Modal",props:{show:{type:Boolean}},emits:["update:show"],setup(s,{emit:e}){const t=()=>{e("update:show")},r=l=>{l.stopPropagation()};return(l,y)=>l.show?(o(),v("div",{key:0,class:"modal-bg",onClick:t},[g("div",{class:"fadeInLeft animated modal",onClick:r},[de(l.$slots,"default",{},void 0,!0)])])):T("",!0)}});const re=B(Ve,[["__scopeId","data-v-30ac208d"]]),De={rotate:"",opacity:1},oe=[{id:0,component:"v-text",label:"文字",propValue:"文字",icon:"Edit",animations:[],events:{},style:{top:0,left:0,width:200,height:33,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:""}},{id:0,component:"v-button",label:"按钮",propValue:"按钮",icon:"Crop",animations:[],events:{},style:{top:0,left:0,width:100,height:34,borderWidth:"",borderColor:"",borderRadius:"",fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{id:0,component:"Picture",label:"图片",icon:"PictureRounded",propValue:Le("../assets/title.jpg"),animations:[],events:{},style:{top:0,left:0,width:300,height:200,borderRadius:""}}];oe.forEach(s=>{s.style={...s.style,...De}});function Le(s){return new URL(s,import.meta.url).href}const Ne={class:"component-list"},Oe=["data-index"],Ue=z({__name:"ComponentList",setup(s){const e=t=>{t.dataTransfer.setData("index",t.target.dataset.index)};return(t,r)=>(o(),v("div",Ne,[(o(!0),v(R,null,M(C(oe),(l,y)=>(o(),v("div",{key:y,class:"item",draggable:"true",onDragstart:r[0]||(r[0]=w=>e(w)),"data-index":y},[(o(),I(K(l.icon),{class:"icon"})),g("span",null,J(l.label),1)],40,Oe))),128))]))}});const Ee=B(Ue,[["__scopeId","data-v-c063c578"]]),Ae={class:"attr-list"},Re=z({__name:"AttrList",setup(s){const e=j.editorStore,t=Q({excludes:["Picture"],options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],map:{left:"x 坐标",top:"y 坐标",height:"高",width:"宽",color:"颜色",backgroundColor:"背景色",borderWidth:"边框宽度",borderColor:"边框颜色",borderRadius:"边框半径",fontSize:"字体大小",fontWeight:"字体粗细",lineHeight:"行高",letterSpacing:"字间距",textAlign:"对齐方式",opacity:"透明度",rotate:"旋转角度"}}),r=se(()=>e.editorState.curComponent?Object.keys(e.editorState.curComponent.style):[]),l=se(()=>e.editorState.curComponent);return(y,w)=>{const k=E("el-color-picker"),n=E("el-option"),f=E("el-select"),u=E("el-input"),c=E("el-form-item"),a=E("el-form");return o(),v("div",Ae,[b(a,null,{default:_(()=>[(o(!0),v(R,null,M(r.value,(m,O)=>(o(),I(c,{key:O,label:t.map[m]},{default:_(()=>[m=="borderColor"?(o(),I(k,{key:0,modelValue:l.value.style[m],"onUpdate:modelValue":h=>l.value.style[m]=h},null,8,["modelValue","onUpdate:modelValue"])):m=="color"?(o(),I(k,{key:1,modelValue:l.value.style[m],"onUpdate:modelValue":h=>l.value.style[m]=h},null,8,["modelValue","onUpdate:modelValue"])):m=="backgroundColor"?(o(),I(k,{key:2,modelValue:l.value.style[m],"onUpdate:modelValue":h=>l.value.style[m]=h},null,8,["modelValue","onUpdate:modelValue"])):m=="textAlign"?(o(),I(f,{key:3,modelValue:l.value.style[m],"onUpdate:modelValue":h=>l.value.style[m]=h},{default:_(()=>[(o(!0),v(R,null,M(t.options,h=>(o(),I(n,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(o(),I(u,{key:4,type:"number",modelValue:l.value.style[m],"onUpdate:modelValue":h=>l.value.style[m]=h},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128)),l.value&&l.value.propValue&&!t.excludes.includes(l.value.component)?(o(),I(c,{key:0,label:"内容"},{default:_(()=>[b(u,{type:"textarea",modelValue:l.value.propValue,"onUpdate:modelValue":w[0]||(w[0]=m=>l.value.propValue=m)},null,8,["modelValue"])]),_:1})):T("",!0)]),_:1})])}}});const Me=B(Re,[["__scopeId","data-v-b2c12231"]]),$e=z({__name:"ContextMenu",setup(s){const e=j.editorStore,t=()=>{e.deleteComponent(),e.recordSnapshot()},r=()=>{e.upComponent(),e.recordSnapshot()},l=()=>{e.downComponent(),e.recordSnapshot()},y=()=>{e.topComponent(),e.recordSnapshot()},w=()=>{e.bottomComponent(),e.recordSnapshot()};return(k,n)=>G((o(),v("div",{class:"contextmenu",style:X({top:C(e).editorState.menuTop+"px",left:C(e).editorState.menuLeft+"px"})},[g("ul",null,[g("li",{onClick:t},"删除"),g("li",{onClick:y},"置顶"),g("li",{onClick:w},"置底"),g("li",{onClick:r},"上移"),g("li",{onClick:l},"下移")])],4)),[[pe,C(e).editorState.menuShow]])}});const Pe=B($e,[["__scopeId","data-v-671b0510"]]);function ze(s){return{all:s=s||new Map,on:function(e,t){var r=s.get(e);r?r.push(t):s.set(e,[t])},off:function(e,t){var r=s.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):s.set(e,[]))},emit:function(e,t){var r=s.get(e);r&&r.slice().map(function(l){l(t)}),(r=s.get("*"))&&r.slice().map(function(l){l(e,t)})}}}const W=ze(),Be={class:"mark-line"},Ye=z({__name:"MarkLine",setup(s){const e=j.editorStore,t=new Map,r=(f,u)=>{f&&t.set(u,f)},l=Q({lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1},editor:null});le(()=>{l.editor=document.querySelector("#editor"),W.on("move",f=>{w(f.isDownward,f.isRightward)}),W.on("unMove",()=>{y()})});const y=()=>{Object.keys(l.lineStatus).forEach(f=>{l.lineStatus[f]=!1})},w=(f,u)=>{const c=e.editorState.componentData,a={...e.editorState.curComponent.style},m=a.width/2,O=a.height/2;a.bottom=a.top+a.height,a.right=a.left+a.width,y(),c.forEach(h=>{if(h===e.editorState.curComponent)return;const{top:V,height:N,left:x,width:$}=h.style,p=V+N,i=x+$,S=$/2,U=N/2,Y={top:[{isNearly:n(a.top,V),lineNode:t.get("xt"),line:"xt",dragShift:V,lineShift:V},{isNearly:n(a.bottom,V),lineNode:t.get("xt"),line:"xt",dragShift:V-a.height,lineShift:V},{isNearly:n(a.top+O,V+U),lineNode:t.get("xc"),line:"xc",dragShift:V+U-O,lineShift:V+U},{isNearly:n(a.top,p),lineNode:t.get("xb"),line:"xb",dragShift:p,lineShift:p},{isNearly:n(a.bottom,p),lineNode:t.get("xb"),line:"xb",dragShift:p-a.height,lineShift:p}],left:[{isNearly:n(a.left,x),lineNode:t.get("yl"),line:"yl",dragShift:x,lineShift:x},{isNearly:n(a.right,x),lineNode:t.get("yl"),line:"yl",dragShift:x-a.width,lineShift:x},{isNearly:n(a.left+m,x+S),lineNode:t.get("yc"),line:"yc",dragShift:x+S-m,lineShift:x+S},{isNearly:n(a.left,i),lineNode:t.get("yr"),line:"yr",dragShift:i,lineShift:i},{isNearly:n(a.right,i),lineNode:t.get("yr"),line:"yr",dragShift:i-a.width,lineShift:i}]},L=[];Object.keys(Y).forEach(H=>{Y[H].forEach(P=>{P.isNearly&&(e.setShapePosStyle({key:H,value:P.dragShift}),P.lineNode.style[H]=`${P.lineShift}px`,L.push(P.line))})}),L.length&&k(L,f,u)})},k=(f,u,c)=>{c?f.includes("yr")?l.lineStatus.yr=!0:f.includes("yc")?l.lineStatus.yc=!0:f.includes("yl")&&(l.lineStatus.yl=!0):f.includes("yl")?l.lineStatus.yl=!0:f.includes("yc")?l.lineStatus.yc=!0:f.includes("yr")&&(l.lineStatus.yr=!0),u?f.includes("xb")?l.lineStatus.xb=!0:f.includes("xc")?l.lineStatus.xc=!0:f.includes("xt")&&(l.lineStatus.xt=!0):f.includes("xt")?l.lineStatus.xt=!0:f.includes("xc")?l.lineStatus.xc=!0:f.includes("xb")&&(l.lineStatus.xb=!0)},n=(f,u)=>Math.abs(f-u)<=l.diff;return(f,u)=>(o(),v("div",Be,[(o(!0),v(R,null,M(l.lines,c=>G((o(),v("div",{key:c,class:Z(["line",c.includes("x")?"xline":"yline"]),ref_for:!0,ref:a=>r(a,c)},null,2)),[[pe,l.lineStatus[c]||!1]])),128))]))}});const He=B(Ye,[["__scopeId","data-v-b2158836"]]),Xe=["onMousedown"],je=z({__name:"Shape",props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object},defaultStyle:{require:!0,type:Object},zIndex:{require:!0,type:[Number,String]}},setup(s){const e=s,t=j.editorStore,r=ce(),l=Q({pointList:["t","r","b","l","lt","rt","lb","rb"],directionKey:{t:"n",b:"s",l:"w",r:"e"}});le(()=>{W.on("runAnimation",()=>{e.element===t.getCurComponent&&r.value!==void 0&&fe(r.value,t.getCurComponent.animations)})});const y=u=>{var p,i;const c=(p=e.defaultStyle)==null?void 0:p.height,a=(i=e.defaultStyle)==null?void 0:i.width,m=/t/.test(u),O=/b/.test(u),h=/l/.test(u),V=/r/.test(u);let N=0,x=0;return u.length===2?(N=h?0:a,x=m?0:c):((m||O)&&(N=a/2,x=m?0:c),(h||V)&&(N=h?0:a,x=Math.floor(c/2))),{marginLeft:V?"-4px":"-3px",marginTop:"-3px",left:`${N}px`,top:`${x}px`,cursor:u.split("").reverse().map(S=>l.directionKey[S]).join("")+"-resize"}},w=u=>{var $;(($=e.element)==null?void 0:$.component)!="v-text"&&u.preventDefault(),u.stopPropagation(),t.setCurComponent({component:e.element,zIndex:e.zIndex});const c={...e.defaultStyle},a=u.clientY,m=u.clientX,O=Number(c.top),h=Number(c.left);let V=!1;const N=p=>{V=!0;const i=p.clientX,S=p.clientY;c.top=S-a+O,c.left=i-m+h,t.setShapeStyle(c),ve(()=>{W.emit("move",{isDownward:S-a>0,isRightward:i-m>0})})},x=()=>{V&&t.recordSnapshot(),W.emit("unMove"),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",x)},k=u=>{u.stopPropagation(),u.preventDefault(),t.hideContextMenu()},n=u=>{const c=window.event;c==null||c.stopPropagation(),c==null||c.preventDefault();const a={...e.defaultStyle},m=Number(a.height),O=Number(a.width),h=Number(a.top),V=Number(a.left),N=c.clientX,x=c.clientY;let $=!1;const p=S=>{$=!0;const U=S.clientX,L=S.clientY-x,H=U-N,P=/t/.test(u),d=/b/.test(u),D=/l/.test(u),q=/r/.test(u),F=m+(P?-L:d?L:0),ae=O+(D?-H:q?H:0);a.height=F>0?F:0,a.width=ae>0?ae:0,a.left=V+(D?H:0),a.top=h+(P?L:0),t.setShapeStyle(a)},i=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",i),$&&t.recordSnapshot()};document.addEventListener("mousemove",p),document.addEventListener("mouseup",i)},f=u=>{u.stopPropagation(),u.preventDefault();let c=u.target,a=u.offsetY,m=u.offsetX;for(;!c.className.includes("editor");)m+=c.offsetLeft,a+=c.offsetTop,c=c.parentNode;t.showContextMenu({top:a,left:m})};return(u,c)=>(o(),v("div",{ref_key:"thisRef",ref:r,class:Z(["shape",{active:s.active}]),onClick:k,onMousedown:w,onContextmenu:f},[(o(!0),v(R,null,M(s.active?l.pointList:[],(a,m)=>(o(),v("div",{class:"shape-point",onMousedown:O=>n(a),key:m,style:X(y(a))},null,44,Xe))),128)),de(u.$slots,"default",{},void 0,!0)],34))}});const We=B(je,[["__scopeId","data-v-daf56d3b"]]),Te=z({__name:"EditorComponent",props:{isEdit:{type:Boolean,default:!0}},setup(s){const e=j.editorStore,t=(w,k)=>{const n={...w};return n.width&&(n.width+="px"),n.height&&(n.height+="px"),n.top&&(n.top+="px"),n.left&&(n.left+="px"),n.rotate&&(n.transform="rotate("+n.rotate+"deg)"),n.zIndex=k,n},r=w=>me(w,["top","left","width","height","zIndex","rotate"]),l=(w,k)=>{w.propValue=k,e.setShapeStyle({height:y(w,k)})},y=(w,k)=>{let{lineHeight:n,fontSize:f,height:u}=w.style;n===""&&(n=1.5);const c=k.split(`
`).length*n*f;return u>c?u:c};return(w,k)=>(o(),v("div",{class:Z(["editor",{edit:s.isEdit}]),id:"editor",style:X({width:C(e).editorState.canvasStyleData.width+"px",height:C(e).editorState.canvasStyleData.height+"px"})},[(o(!0),v(R,null,M(C(e).editorState.componentData,(n,f)=>(o(),I(We,{defaultStyle:n.style,style:X(t(n.style,f)),key:n.id,active:n===C(e).editorState.curComponent,element:n,zIndex:f},{default:_(()=>[n.component!="v-text"?(o(),I(K(n.component),{key:0,class:"component",style:X(r(n.style)),propValue:n.propValue},null,8,["style","propValue"])):(o(),I(K(n.component),{key:1,class:"component",style:X(r(n.style)),propValue:n.propValue,onInput:l,element:n},null,40,["style","propValue","element"]))]),_:2},1032,["defaultStyle","style","active","element","zIndex"]))),128)),b(Pe),b(He)],6))}});const qe=B(Te,[["__scopeId","data-v-42531490"]]),ue=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedInRight"},{label:"光速从左进入",value:"lightSpeedInLeft"},{label:"光速从右退出",value:"lightSpeedOutRight"},{label:"光速从左退出",value:"lightSpeedOutLeft"},{label:"Y轴旋转",value:"flip"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];let Fe=0;function ee(){return Fe++}const ne=s=>(ge("data-v-646350e7"),s=s(),ye(),s),Je={class:"home"},Ke=ne(()=>g("label",{for:"input",class:"insert"},"插入图片",-1)),Ge={class:"canvas-config"},Qe=ne(()=>g("span",null,"画布大小",-1)),Ze=ne(()=>g("span",null,"*",-1)),et={class:"left"},tt={class:"center"},lt={class:"right"},ot={key:1,class:"placeholder"},nt={key:0,class:"div-animation"},at={key:1,class:"placeholder"},st={key:0,class:"div-events"},it={key:1,class:"placeholder"},rt={class:"el-scrollbar-view"},ut=["onMouseover","onClick"],ct=z({__name:"Home",setup(s){const e=j.editorStore,t=Q({isShowPreview:!1,isShowAnimation:!1,isShowEvent:!1,activeName:"attr",animationClassData:ue,animationActiveName:"进入",showAnimatePanel:!1,reSelectAnimateIndex:void 0,hoverPreviewAnimate:"",eventURL:"",eventActiveName:"redirect",eventList:Se}),r=()=>{localStorage.getItem("canvasData")&&e.setComponentData(l(JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&e.setCanvasStyle(l(JSON.parse(localStorage.getItem("canvasStyle"))))},l=p=>(p.forEach((i,S)=>{i.id=ee()}),t),y=p=>{p.preventDefault(),p.stopPropagation();const i=_e.cloneDeep(oe[p.dataTransfer.getData("index")]);i.style.top=p.offsetY,i.style.left=p.offsetX,i.id=ee(),e.addComponent(i),e.recordSnapshot()},w=p=>{p.preventDefault(),p.dataTransfer.dropEffect="copy"},k=()=>{e.setCurComponent({component:null,zIndex:null}),e.hideContextMenu()},n=()=>{e.undo()},f=()=>{e.redo()},u=p=>{const i=p.target.files[0];if(!i.type.includes("image")){he("只能插入图片","error");return}const S=new FileReader;S.onload=U=>{const Y=U.target.result,L=new Image;L.onload=()=>{e.addComponent({id:ee(),component:"Picture",label:"图片",icon:"",propValue:Y,animations:[],events:[],style:{top:0,left:0,width:L.width,height:L.height,rotate:""}})},L.src=Y},S.readAsDataURL(i)},c=p=>{e.addAnimation(p),t.isShowAnimation=!1},a=()=>{W.emit("runAnimation")},m=p=>{e.removeAnimation(p)},O=()=>{t.isShowPreview=!0,e.setEditMode("read")},h=()=>{e.setEditMode("edit")},V=()=>{localStorage.setItem("canvasData",JSON.stringify(e.editorState.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(e.editorState.canvasStyleData)),be.success("保存成功")},N=()=>{e.setComponentData([])},x=(p,i)=>{t.isShowEvent=!1,e.addEvent({event:p,param:i})},$=p=>{e.removeEvent(p)};return r(),(p,i)=>{const S=E("el-button"),U=E("el-tab-pane"),Y=E("el-tag"),L=E("el-tabs"),H=E("el-scrollbar"),P=E("el-input");return o(),v("div",Je,[g("header",null,[b(S,{onClick:n},{default:_(()=>[A("撤消")]),_:1}),b(S,{onClick:f},{default:_(()=>[A("重做")]),_:1}),Ke,g("input",{type:"file",onChange:u,id:"input",hidden:""},null,32),b(S,{onClick:O,style:{"margin-left":"10px"}},{default:_(()=>[A("预览")]),_:1}),b(S,{onClick:V},{default:_(()=>[A("保存")]),_:1}),b(S,{onClick:N},{default:_(()=>[A("清空画布")]),_:1}),g("div",Ge,[Qe,G(g("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>C(e).editorState.canvasStyleData.width=d)},null,512),[[ie,C(e).editorState.canvasStyleData.width]]),Ze,G(g("input",{"onUpdate:modelValue":i[1]||(i[1]=d=>C(e).editorState.canvasStyleData.height=d)},null,512),[[ie,C(e).editorState.canvasStyleData.height]])])]),g("main",null,[g("section",et,[b(Ee)]),g("section",tt,[g("div",{class:"content",onDrop:y,onDragover:w,onClick:k},[b(qe)],32)]),g("section",lt,[b(L,{modelValue:t.activeName,"onUpdate:modelValue":i[4]||(i[4]=d=>t.activeName=d),type:"card"},{default:_(()=>[b(U,{label:"属性",name:"attr"},{default:_(()=>[C(e).editorState.curComponent?(o(),I(Me,{key:0})):(o(),v("p",ot,"请选择组件"))]),_:1}),b(U,{label:"动画",name:"animation"},{default:_(()=>[C(e).editorState.curComponent?(o(),v("div",nt,[b(S,{onClick:i[2]||(i[2]=d=>{t.isShowAnimation=!0})},{default:_(()=>[A("添加动画")]),_:1}),b(S,{onClick:a},{default:_(()=>[A("预览动画")]),_:1}),g("div",null,[(o(!0),v(R,null,M(C(e).editorState.curComponent.animations,(d,D)=>(o(),I(Y,{key:D,closable:"",onClose:q=>m(D)},{default:_(()=>[A(J(d.label),1)]),_:2},1032,["onClose"]))),128))])])):(o(),v("p",at,"请选择组件"))]),_:1}),b(U,{label:"事件",name:"events"},{default:_(()=>[C(e).editorState.curComponent?(o(),v("div",st,[b(S,{onClick:i[3]||(i[3]=d=>t.isShowEvent=!0)},{default:_(()=>[A("添加事件")]),_:1}),g("div",null,[(o(!0),v(R,null,M(Object.keys(C(e).editorState.curComponent.events),d=>(o(),I(Y,{key:d,closable:"",onClose:D=>$(d)},{default:_(()=>[A(J(d),1)]),_:2},1032,["onClose"]))),128))])])):(o(),v("p",it,"请选择组件"))]),_:1})]),_:1},8,["modelValue"])])]),b(re,{show:t.isShowAnimation,"onUpdate:show":i[6]||(i[6]=d=>t.isShowAnimation=d)},{default:_(()=>[b(L,{type:"card",modelValue:t.animationActiveName,"onUpdate:modelValue":i[5]||(i[5]=d=>t.animationActiveName=d)},{default:_(()=>[(o(!0),v(R,null,M(C(ue),d=>(o(),I(U,{key:d.label,label:d.label,name:d.label},{default:_(()=>[b(H,{class:"animate-container"},{default:_(()=>[g("div",rt,[(o(!0),v(R,null,M(d.children,(D,q)=>(o(),v("div",{class:"animate",key:q,onMouseover:F=>t.hoverPreviewAnimate=D.value,onClick:F=>c(D)},[g("div",{class:Z([t.hoverPreviewAnimate===D.value&&"animate__animated animate__"+D.value])},J(D.label),3)],40,ut))),128))])]),_:2},1024)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["show"]),b(re,{show:t.isShowEvent,"onUpdate:show":i[8]||(i[8]=d=>t.isShowEvent=d)},{default:_(()=>[b(L,{type:"card",modelValue:t.eventActiveName,"onUpdate:modelValue":i[7]||(i[7]=d=>t.eventActiveName=d)},{default:_(()=>[(o(!0),v(R,null,M(t.eventList,d=>(o(),I(U,{key:d.key,label:d.label,name:d.key,style:{padding:"0 20px"}},{default:_(()=>[d.key=="redirect"?(o(),I(P,{key:0,modelValue:d.param,"onUpdate:modelValue":D=>d.param=D,type:"textarea",placeholder:"请输入完整的 URL"},null,8,["modelValue","onUpdate:modelValue"])):T("",!0),d.key=="alert"?(o(),I(P,{key:1,modelValue:d.param,"onUpdate:modelValue":D=>d.param=D,type:"textarea",placeholder:"请输入要 alert 的内容"},null,8,["modelValue","onUpdate:modelValue"])):T("",!0),b(S,{style:{"margin-top":"20px"},onClick:D=>x(d.key,d.param)},{default:_(()=>[A("确定")]),_:2},1032,["onClick"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["show"]),b(ke,{show:t.isShowPreview,"onUpdate:show":i[9]||(i[9]=d=>t.isShowPreview=d),onChange:h},null,8,["show"])])}}});const pt=B(ct,[["__scopeId","data-v-646350e7"]]);export{pt as default};
