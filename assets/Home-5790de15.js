import{d as z,r as fe,o as ne,a as c,c as b,b as P,n as Y,u as L,e as G,_ as H,f as X,g as R,h as S,w as y,i as w,F as B,j as $,k as F,l as A,m as me,t as K,p as Q,q as re,s as J,v as ae,x as Z,y as be,z as ce,A as ye,B as Se,E as xe,C as we,D as Ce}from"./index-d3011f5e.js";async function ve(e,t=[]){if(e){const n=a=>new Promise(o=>{e.classList.add("animate__animated","animate__"+a.value);const u=()=>{e.removeEventListener("animationend",u),e.removeEventListener("animationcancel",u),e.classList.remove("animate__animated","animate__"+a.value),o()};e.addEventListener("animationend",u),e.addEventListener("animationcancel",u)});for(let a=0,o=t.length;a<o;a++)await n(t[a])}else console.log("runAnimation el为空")}function _e(e,t=[]){const n=["fontSize","width","height","top","left"],a={};return Object.keys(e).forEach(o=>{t.includes(o)||(o!="rotate"?(a[o]=e[o],n.includes(o)||(a[o]+="px")):a.transform=o+"("+e[o]+"deg)")}),a}const oe={redirect(e){e&&(window.location.href=e)},alert(e){e&&alert(e)}},Me=[{key:"redirect",label:"跳转事件",event:oe.redirect,param:""},{key:"alert",label:"alert 事件",event:oe.alert,param:""}],ke=z({__name:"ComponentWrapper",props:{config:{}},setup(e){const t=e,n=fe();ne(()=>{n.value!==void 0&&ve(n.value,t.config.animations)});const a=()=>{const o=t.config.events;Object.keys(o).forEach(u=>{oe[u](o[u])})};return(o,u)=>(c(),b("div",{onClick:a,ref_key:"wrapperDom",ref:n},[(c(),P(G(o.config.component),{class:"component",style:Y(L(_e)(o.config.style)),propValue:o.config.propValue},null,8,["style","propValue"]))],512))}});const Le=H(ke,[["__scopeId","data-v-f6fda919"]]),Ie={key:0,class:"bg"},Pe=z({__name:"Preview",props:{show:{type:Boolean}},emits:["update:show"],setup(e,{emit:t}){const n=X.editorStore.editorState,a=()=>{t("update:show",!1)};return(o,u)=>{const i=R("el-button");return o.show?(c(),b("div",Ie,[S(i,{onClick:a,class:"close"},{default:y(()=>[A("关闭")]),_:1}),w("div",{class:"canvas",style:Y({width:L(n).canvasStyleData.width+"px",height:L(n).canvasStyleData.height+"px"})},[(c(!0),b(B,null,$(L(n).componentData,(d,s)=>(c(),P(Le,{key:s,config:d},null,8,["config"]))),128))],4)])):F("",!0)}}});const De=H(Pe,[["__scopeId","data-v-056676b2"]]),Ve=z({__name:"Modal",props:{show:{type:Boolean}},emits:["update:show"],setup(e,{emit:t}){const n=()=>{t("update:show")},a=o=>{o.stopPropagation()};return(o,u)=>o.show?(c(),b("div",{key:0,class:"modal-bg",onClick:n},[w("div",{class:"fadeInLeft animated modal",onClick:a},[me(o.$slots,"default",{},void 0,!0)])])):F("",!0)}});const ue=H(Ve,[["__scopeId","data-v-30ac208d"]]),Oe={rotate:"",opacity:1},le=[{id:0,component:"v-text",label:"文字",propValue:"文字",icon:"Edit",animations:[],events:{},style:{top:0,left:0,width:200,height:33,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:""}},{id:0,component:"v-button",label:"按钮",propValue:"按钮",icon:"Crop",animations:[],events:{},style:{top:0,left:0,width:100,height:34,borderWidth:"",borderColor:"",borderRadius:"",fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{id:0,component:"Picture",label:"图片",icon:"PictureRounded",propValue:Re("../assets/title.jpg"),animations:[],events:{},style:{top:0,left:0,width:300,height:200,borderRadius:""}}];le.forEach(e=>{e.style={...e.style,...Oe}});function Re(e){return new URL(e,import.meta.url).href}const Ne={class:"component-list"},Ue=["data-index"],Ee=z({__name:"ComponentList",setup(e){const t=n=>{n.dataTransfer.setData("index",n.target.dataset.index)};return(n,a)=>(c(),b("div",Ne,[(c(!0),b(B,null,$(L(le),(o,u)=>(c(),b("div",{key:u,class:"item",draggable:"true",onDragstart:a[0]||(a[0]=i=>t(i)),"data-index":u},[(c(),P(G(o.icon),{class:"icon"})),w("span",null,K(o.label),1)],40,Ue))),128))]))}});const Ae=H(Ee,[["__scopeId","data-v-c47933ae"]]),Be={class:"attr-list"},$e=z({__name:"AttrList",setup(e){const t=X.editorStore,n=Q({excludes:["Picture"],options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],map:{left:"x 坐标",top:"y 坐标",height:"高",width:"宽",color:"颜色",backgroundColor:"背景色",borderWidth:"边框宽度",borderColor:"边框颜色",borderRadius:"边框半径",fontSize:"字体大小",fontWeight:"字体粗细",lineHeight:"行高",letterSpacing:"字间距",textAlign:"对齐方式",opacity:"透明度",rotate:"旋转角度"}}),a=re(()=>t.editorState.curComponent?Object.keys(t.editorState.curComponent.style):[]),o=re(()=>t.editorState.curComponent);return(u,i)=>{const d=R("el-color-picker"),s=R("el-option"),U=R("el-select"),D=R("el-input"),l=R("el-form-item"),v=R("el-form");return c(),b("div",Be,[S(v,null,{default:y(()=>[(c(!0),b(B,null,$(a.value,(r,p)=>(c(),P(l,{key:p,label:n.map[r]},{default:y(()=>[r=="borderColor"?(c(),P(d,{key:0,modelValue:o.value.style[r],"onUpdate:modelValue":_=>o.value.style[r]=_},null,8,["modelValue","onUpdate:modelValue"])):r=="color"?(c(),P(d,{key:1,modelValue:o.value.style[r],"onUpdate:modelValue":_=>o.value.style[r]=_},null,8,["modelValue","onUpdate:modelValue"])):r=="backgroundColor"?(c(),P(d,{key:2,modelValue:o.value.style[r],"onUpdate:modelValue":_=>o.value.style[r]=_},null,8,["modelValue","onUpdate:modelValue"])):r=="textAlign"?(c(),P(U,{key:3,modelValue:o.value.style[r],"onUpdate:modelValue":_=>o.value.style[r]=_},{default:y(()=>[(c(!0),b(B,null,$(n.options,_=>(c(),P(s,{key:_.value,label:_.label,value:_.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(c(),P(D,{key:4,type:"number",modelValue:o.value.style[r],"onUpdate:modelValue":_=>o.value.style[r]=_},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128)),o.value&&o.value.propValue&&!n.excludes.includes(o.value.component)?(c(),P(l,{key:0,label:"内容"},{default:y(()=>[S(D,{type:"textarea",modelValue:o.value.propValue,"onUpdate:modelValue":i[0]||(i[0]=r=>o.value.propValue=r)},null,8,["modelValue"])]),_:1})):F("",!0)]),_:1})])}}});const ze=H($e,[["__scopeId","data-v-b2c12231"]]),He=z({__name:"ContextMenu",setup(e){const t=X.editorStore,n=()=>{t.deleteComponent(),t.recordSnapshot()},a=()=>{t.upComponent(),t.recordSnapshot()},o=()=>{t.downComponent(),t.recordSnapshot()},u=()=>{t.topComponent(),t.recordSnapshot()},i=()=>{t.bottomComponent(),t.recordSnapshot()};return(d,s)=>J((c(),b("div",{class:"contextmenu",style:Y({top:L(t).editorState.menuTop+"px",left:L(t).editorState.menuLeft+"px"})},[w("ul",null,[w("li",{onClick:n},"删除"),w("li",{onClick:u},"置顶"),w("li",{onClick:i},"置底"),w("li",{onClick:a},"上移"),w("li",{onClick:o},"下移")])],4)),[[ae,L(t).editorState.menuShow]])}});const Ye=H(He,[["__scopeId","data-v-671b0510"]]);function We(e){return{all:e=e||new Map,on:function(t,n){var a=e.get(t);a?a.push(n):e.set(t,[n])},off:function(t,n){var a=e.get(t);a&&(n?a.splice(a.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var a=e.get(t);a&&a.slice().map(function(o){o(n)}),(a=e.get("*"))&&a.slice().map(function(o){o(t,n)})}}}const q=We();function j(e){return e*Math.PI/180}function O(e,t,n){return{x:(e.x-t.x)*Math.cos(j(n))-(e.y-t.y)*Math.sin(j(n))+t.x,y:(e.x-t.x)*Math.sin(j(n))+(e.y-t.y)*Math.cos(j(n))+t.y}}function Xe(e,t,n){let a;switch(n){case"t":a={x:e.left+e.width/2,y:e.top};break;case"b":a={x:e.left+e.width/2,y:e.top+e.height};break;case"l":a={x:e.left,y:e.top+e.height/2};break;case"r":a={x:e.left+e.width,y:e.top+e.height/2};break;case"lt":a={x:e.left,y:e.top};break;case"rt":a={x:e.left+e.width,y:e.top};break;case"lb":a={x:e.left,y:e.top+e.height};break;default:a={x:e.left+e.width,y:e.top+e.height};break}return O(a,t,e.rotate)}function ee(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}function de(e){return Math.abs(Math.sin(j(e)))}function pe(e){return Math.abs(Math.cos(j(e)))}const Te={class:"mark-line"},je=z({__name:"MarkLine",setup(e){const t=X.editorStore,n=new Map,a=(l,v)=>{l&&n.set(v,l)},o=Q({lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}});ne(()=>{q.on("move",l=>{d(l.isDownward,l.isRightward)}),q.on("unMove",()=>{i()})});const u=l=>{if(l={...l},l.rotate!=0){const v=l.width*pe(l.rotate)+l.height*de(l.rotate),r=(l.width-v)/2;l.left+=r,l.right=l.left+v;const p=l.height*pe(l.rotate)+l.width*de(l.rotate),_=(p-l.height)/2;l.top-=_,l.bottom=l.top+p,l.width=v,l.height=p}else l.bottom=l.top+l.height,l.right=l.left+l.width;return l},i=()=>{Object.keys(o.lineStatus).forEach(l=>{o.lineStatus[l]=!1})},d=(l,v)=>{const r=t.editorState.componentData,p=u(t.editorState.curComponent.style),_=p.width/2,x=p.height/2;i(),r.forEach(M=>{if(M==t.editorState.curComponent)return;const V=u(M.style),{top:C,left:f,bottom:h,right:g}=V,k=V.width/2,E=V.height/2,N={top:[{isNearly:D(p.top,C),lineNode:n.get("xt"),line:"xt",dragShift:C,lineShift:C},{isNearly:D(p.bottom,C),lineNode:n.get("xt"),line:"xt",dragShift:C-p.height,lineShift:C},{isNearly:D(p.top+x,C+E),lineNode:n.get("xc"),line:"xc",dragShift:C+E-x,lineShift:C+E},{isNearly:D(p.top,h),lineNode:n.get("xb"),line:"xb",dragShift:h,lineShift:h},{isNearly:D(p.bottom,h),lineNode:n.get("xb"),line:"xb",dragShift:h-p.height,lineShift:h}],left:[{isNearly:D(p.left,f),lineNode:n.get("yl"),line:"yl",dragShift:f,lineShift:f},{isNearly:D(p.right,f),lineNode:n.get("yl"),line:"yl",dragShift:f-p.width,lineShift:f},{isNearly:D(p.left+_,f+k),lineNode:n.get("yc"),line:"yc",dragShift:f+k-_,lineShift:f+k},{isNearly:D(p.left,g),lineNode:n.get("yr"),line:"yr",dragShift:g,lineShift:g},{isNearly:D(p.right,g),lineNode:n.get("yr"),line:"yr",dragShift:g-p.width,lineShift:g}]},W=[],{rotate:T}=t.editorState.curComponent.style;Object.keys(N).forEach(m=>{N[m].forEach(I=>{I.isNearly&&(t.setShapePosStyle({key:m,value:T!=0?s(m,I,p):I.dragShift}),I.lineNode.style[m]=`${I.lineShift}px`,W.push(I.line))})}),W.length&&U(W,l,v)})},s=(l,v,r)=>{const{width:p,height:_}=t.editorState.curComponent.style;return l=="top"?Math.round(v.dragShift-(_-r.height)/2):Math.round(v.dragShift-(p-r.width)/2)},U=(l,v,r)=>{r?l.includes("yr")?o.lineStatus.yr=!0:l.includes("yc")?o.lineStatus.yc=!0:l.includes("yl")&&(o.lineStatus.yl=!0):l.includes("yl")?o.lineStatus.yl=!0:l.includes("yc")?o.lineStatus.yc=!0:l.includes("yr")&&(o.lineStatus.yr=!0),v?l.includes("xb")?o.lineStatus.xb=!0:l.includes("xc")?o.lineStatus.xc=!0:l.includes("xt")&&(o.lineStatus.xt=!0):l.includes("xt")?o.lineStatus.xt=!0:l.includes("xc")?o.lineStatus.xc=!0:l.includes("xb")&&(o.lineStatus.xb=!0)},D=(l,v)=>Math.abs(l-v)<=o.diff;return(l,v)=>(c(),b("div",Te,[(c(!0),b(B,null,$(o.lines,r=>J((c(),b("div",{key:r,class:Z(["line",r.includes("x")?"xline":"yline"]),ref_for:!0,ref:p=>a(p,r)},null,2)),[[ae,o.lineStatus[r]||!1]])),128))]))}});const qe=H(je,[["__scopeId","data-v-736c7152"]]),Fe={lt:Je,t:Ke,rt:et,r:Ge,rb:tt,b:Qe,lb:ot,l:Ze};function Je(e,t,n){const{symmetricPoint:a}=n,o=ee(t,a),u=O(t,o,-e.rotate),i=O(a,o,-e.rotate),d=i.x-u.x,s=i.y-u.y;d>0&&s>0&&(e.width=Math.round(d),e.height=Math.round(s),e.left=Math.round(u.x),e.top=Math.round(u.y))}function Ke(e,t,n){const{symmetricPoint:a,clickPoint:o}=n,u=O(t,o,-e.rotate),i=O({x:o.x,y:u.y},o,e.rotate),d=Math.sqrt((i.x-a.x)**2+(i.y-a.y)**2);if(d>0){const s={x:i.x-(i.x-a.x)/2,y:i.y+(a.y-i.y)/2};e.height=Math.round(d),e.top=Math.round(s.y-d/2),e.left=Math.round(s.x-e.width/2)}}function Ge(e,t,n){const{symmetricPoint:a,clickPoint:o}=n,u=O(t,o,-e.rotate),i=O({x:u.x,y:o.y},o,e.rotate),d=Math.sqrt((i.x-a.x)**2+(i.y-a.y)**2);if(d>0){const s={x:i.x-(i.x-a.x)/2,y:i.y+(a.y-i.y)/2};e.width=Math.round(d),e.top=Math.round(s.y-e.height/2),e.left=Math.round(s.x-d/2)}}function Qe(e,t,n){const{symmetricPoint:a,clickPoint:o}=n,u=O(t,o,-e.rotate),i=O({x:o.x,y:u.y},o,e.rotate),d=Math.sqrt((i.x-a.x)**2+(i.y-a.y)**2);if(d>0){const s={x:i.x-(i.x-a.x)/2,y:i.y+(a.y-i.y)/2};e.height=Math.round(d),e.top=Math.round(s.y-d/2),e.left=Math.round(s.x-e.width/2)}}function Ze(e,t,n){const{symmetricPoint:a,clickPoint:o}=n,u=O(t,o,-e.rotate),i=O({x:u.x,y:o.y},o,e.rotate),d=Math.sqrt((i.x-a.x)**2+(i.y-a.y)**2);if(d>0){const s={x:i.x-(i.x-a.x)/2,y:i.y+(a.y-i.y)/2};e.width=Math.round(d),e.top=Math.round(s.y-e.height/2),e.left=Math.round(s.x-d/2)}}function et(e,t,n){const{symmetricPoint:a}=n,o=ee(t,a),u=O(t,o,-e.rotate),i=O(a,o,-e.rotate),d=u.x-i.x,s=i.y-u.y;d>0&&s>0&&(e.width=Math.round(d),e.height=Math.round(s),e.left=Math.round(i.x),e.top=Math.round(u.y))}function tt(e,t,n){const{symmetricPoint:a}=n,o=ee(t,a),u=O(a,o,-e.rotate),i=O(t,o,-e.rotate),d=i.x-u.x,s=i.y-u.y;d>0&&s>0&&(e.width=Math.round(d),e.height=Math.round(s),e.left=Math.round(u.x),e.top=Math.round(u.y))}function ot(e,t,n){const{symmetricPoint:a}=n,o=ee(t,a),u=O(a,o,-e.rotate),i=O(t,o,-e.rotate),d=u.x-i.x,s=i.y-u.y;d>0&&s>0&&(e.width=Math.round(d),e.height=Math.round(s),e.left=Math.round(i.x),e.top=Math.round(u.y))}function nt(e,t,n,a){Fe[e](t,n,a)}const at=["onMousedown"],lt=z({__name:"ShapeComponent",props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object},defaultStyle:{require:!0,type:Object},index:{require:!0,type:[Number,String]}},setup(e){const t=e,n=X.editorStore,a=fe(),o=Q({pointList:["lt","t","rt","r","lb","b","rb","l"],directions:["nw","n","ne","e","sw","s","se","w"],cursors:[]});ne(()=>{q.on("runAnimation",()=>{t.element===n.getCurComponent&&a.value!==void 0&&ve(a.value,n.getCurComponent.animations)})});const u=l=>{var k;l.stopPropagation();const v={...t.defaultStyle},r=l.clientY,p=l.clientX,_=v.rotate,x=(k=a.value)==null?void 0:k.getBoundingClientRect(),M=(x==null?void 0:x.left)+(x==null?void 0:x.width)/2,V=(x==null?void 0:x.top)+(x==null?void 0:x.height)/2,C=Math.atan2(r-V,p-M)/(Math.PI/180);let f=!1;const h=E=>{f=!0;const N=E.clientX,W=E.clientY,T=Math.atan2(W-V,N-M)/(Math.PI/180);v.rotate=_+T-C,n.setShapeStyle(v)},g=()=>{f&&n.recordSnapshot(),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g),o.cursors=d()};document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)},i=(l,v)=>{var g,k;const r=(g=t.defaultStyle)==null?void 0:g.height,p=(k=t.defaultStyle)==null?void 0:k.width,_=/t/.test(l),x=/b/.test(l),M=/l/.test(l),V=/r/.test(l);let C=0,f=0;return l.length===2?(C=M?0:p,f=_?0:r):((_||x)&&(C=p/2,f=_?0:r),(M||V)&&(C=M?0:p,f=Math.floor(r/2))),{marginLeft:"-4px",marginTop:"-4px",left:`${C}px`,top:`${f}px`,cursor:o.cursors[v]}},d=()=>{const l=Math.floor((n.editorState.curComponent.style.rotate+360)%360/45)%8,v=o.directions;return[...v.slice(l),...v.slice(0,l)].map(p=>p+"-resize")},s=l=>{var f;((f=t.element)==null?void 0:f.component)!="v-text"&&l.preventDefault(),l.stopPropagation(),n.setCurComponent({component:t.element,zIndex:t.index}),o.cursors=d();const v={...t.defaultStyle},r=l.clientY,p=l.clientX,_=Number(v.top),x=Number(v.left);let M=!1;const V=h=>{M=!0;const g=h.clientX,k=h.clientY;v.top=k-r+_,v.left=g-p+x,n.setShapeStyle(v),be(()=>{q.emit("move",{isDownward:k-r>0,isRightward:g-p>0})})},C=()=>{M&&n.recordSnapshot(),q.emit("unMove"),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",V),document.addEventListener("mouseup",C)},U=l=>{l.stopPropagation(),l.preventDefault(),n.hideContextMenu()},D=l=>{var h;const v=window.event;v==null||v.stopPropagation(),v==null||v.preventDefault();const r={...t.defaultStyle},p={x:r.left+r.width/2,y:r.top+r.height/2},_=Xe(r,p,l),x={x:p.x-(_.x-p.x),y:p.y-(_.y-p.y)},M=(h=document==null?void 0:document.querySelector("#editor"))==null?void 0:h.getBoundingClientRect();let V=!1;const C=g=>{V=!0;const k={x:g.clientX-(M==null?void 0:M.left),y:g.clientY-(M==null?void 0:M.top)};nt(l,r,k,{center:p,clickPoint:_,symmetricPoint:x}),n.setShapeStyle(r)},f=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",f),V&&n.recordSnapshot()};document.addEventListener("mousemove",C),document.addEventListener("mouseup",f)};return(l,v)=>{const r=R("RefreshRight"),p=R("el-icon");return c(),b("div",{ref_key:"thisRef",ref:a,class:Z(["shape",{active:e.active}]),onClick:U,onMousedown:s},[J(S(p,{class:"el-icon-refresh-right",onMousedown:u},{default:y(()=>[S(r)]),_:1},512),[[ae,e.active]]),(c(!0),b(B,null,$(e.active?o.pointList:[],(_,x)=>(c(),b("div",{class:"shape-point",onMousedown:M=>D(_),key:x,style:Y(i(_,x))},null,44,at))),128)),me(l.$slots,"default",{},void 0,!0)],34)}}});const it=H(lt,[["__scopeId","data-v-27921f05"]]),st=z({__name:"EditorComponent",props:{isEdit:{type:Boolean,default:!0}},setup(e){const t=X.editorStore,n=(i,d)=>{const s={...i};return s.width&&(s.width+="px"),s.height&&(s.height+="px"),s.top&&(s.top+="px"),s.left&&(s.left+="px"),s.rotate&&(s.transform="rotate("+s.rotate+"deg)"),s.zIndex=d,s},a=i=>_e(i,["top","left","width","height","zIndex","rotate"]),o=(i,d)=>{i.propValue=d,t.setShapeStyle({height:u(i,d)})},u=(i,d)=>{let{lineHeight:s,fontSize:U,height:D}=i.style;s===""&&(s=1.5);const l=d.split(`
`).length*s*U;return D>l?D:l};return(i,d)=>(c(),b("div",{class:Z(["editor",{edit:e.isEdit}]),id:"editor",style:Y({width:L(t).editorState.canvasStyleData.width+"px",height:L(t).editorState.canvasStyleData.height+"px"})},[(c(!0),b(B,null,$(L(t).editorState.componentData,(s,U)=>(c(),P(it,{defaultStyle:s.style,style:Y(n(s.style,U)),key:s.id,active:s===L(t).editorState.curComponent,element:s,zIndex:U},{default:y(()=>[s.component!="v-text"?(c(),P(G(s.component),{key:0,class:"component",style:Y(a(s.style)),propValue:s.propValue},null,8,["style","propValue"])):(c(),P(G(s.component),{key:1,class:"component",style:Y(a(s.style)),propValue:s.propValue,onInput:o,element:s},null,40,["style","propValue","element"]))]),_:2},1032,["defaultStyle","style","active","element","zIndex"]))),128)),S(Ye),S(qe)],6))}});const rt=H(st,[["__scopeId","data-v-89b91f1d"]]),he=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedInRight"},{label:"光速从左进入",value:"lightSpeedInLeft"},{label:"光速从右退出",value:"lightSpeedOutRight"},{label:"光速从左退出",value:"lightSpeedOutLeft"},{label:"Y轴旋转",value:"flip"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];let ct=0;function te(){return ct++}const ie=e=>(we("data-v-f155ec91"),e=e(),Ce(),e),ut={class:"home"},dt=ie(()=>w("label",{for:"input",class:"insert"},"插入图片",-1)),pt={class:"canvas-config"},ht=ie(()=>w("span",null,"画布大小",-1)),ft=ie(()=>w("span",null,"*",-1)),mt={class:"left"},vt={class:"center"},_t={class:"right"},gt={key:1,class:"placeholder"},bt={key:0,class:"div-animation"},yt={key:1,class:"placeholder"},St={key:0,class:"div-events"},xt={key:1,class:"placeholder"},wt={class:"el-scrollbar-view"},Ct=["onMouseover","onClick"],Mt=z({__name:"Home",setup(e){const t=X.editorStore,n=Q({isShowPreview:!1,isShowAnimation:!1,isShowEvent:!1,activeName:"attr",animationClassData:he,animationActiveName:"进入",showAnimatePanel:!1,reSelectAnimateIndex:void 0,hoverPreviewAnimate:"",eventURL:"",eventActiveName:"redirect",eventList:Me}),a=()=>{localStorage.getItem("canvasData")&&t.setComponentData(o(JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&t.setCanvasStyle(o(JSON.parse(localStorage.getItem("canvasStyle"))))},o=f=>(f.forEach(h=>{h.id=te()}),n),u=f=>{f.preventDefault(),f.stopPropagation();const h=ye.cloneDeep(le[f.dataTransfer.getData("index")]);h.style.top=f.offsetY,h.style.left=f.offsetX,h.id=te(),t.addComponent(h),t.recordSnapshot()},i=f=>{f.preventDefault(),f.dataTransfer.dropEffect="copy"},d=()=>{t.setCurComponent({component:null,zIndex:null}),t.hideContextMenu()},s=()=>{t.undo()},U=()=>{t.redo()},D=f=>{const h=f.target.files[0];if(!h.type.includes("image")){Se("只能插入图片","error");return}const g=new FileReader;g.onload=k=>{const E=k.target.result,N=new Image;N.onload=()=>{t.addComponent({id:te(),component:"Picture",label:"图片",icon:"",propValue:E,animations:[],events:[],style:{top:0,left:0,width:N.width,height:N.height,rotate:""}})},N.src=E},g.readAsDataURL(h)},l=f=>{t.addAnimation(f),n.isShowAnimation=!1},v=()=>{q.emit("runAnimation")},r=f=>{t.removeAnimation(f)},p=()=>{n.isShowPreview=!0,t.setEditMode("read")},_=()=>{t.setEditMode("edit")},x=()=>{localStorage.setItem("canvasData",JSON.stringify(t.editorState.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(t.editorState.canvasStyleData)),xe.success("保存成功")},M=()=>{t.setComponentData([])},V=(f,h)=>{n.isShowEvent=!1,t.addEvent({event:f,param:h})},C=f=>{t.removeEvent(f)};return a(),(f,h)=>{const g=R("el-button"),k=R("el-tab-pane"),E=R("el-tag"),N=R("el-tabs"),W=R("el-scrollbar"),T=R("el-input");return c(),b("div",ut,[w("header",null,[S(g,{onClick:s},{default:y(()=>[A("撤消")]),_:1}),S(g,{onClick:U},{default:y(()=>[A("重做")]),_:1}),dt,w("input",{type:"file",onChange:D,id:"input",hidden:""},null,32),S(g,{onClick:p,style:{"margin-left":"10px"}},{default:y(()=>[A("预览")]),_:1}),S(g,{onClick:x},{default:y(()=>[A("保存")]),_:1}),S(g,{onClick:M},{default:y(()=>[A("清空画布")]),_:1}),w("div",pt,[ht,J(w("input",{"onUpdate:modelValue":h[0]||(h[0]=m=>L(t).editorState.canvasStyleData.width=m)},null,512),[[ce,L(t).editorState.canvasStyleData.width]]),ft,J(w("input",{"onUpdate:modelValue":h[1]||(h[1]=m=>L(t).editorState.canvasStyleData.height=m)},null,512),[[ce,L(t).editorState.canvasStyleData.height]])])]),w("main",null,[w("section",mt,[S(Ae)]),w("section",vt,[w("div",{class:"content",onDrop:u,onDragover:i,onClick:d},[S(rt)],32)]),w("section",_t,[S(N,{modelValue:n.activeName,"onUpdate:modelValue":h[4]||(h[4]=m=>n.activeName=m),type:"card"},{default:y(()=>[S(k,{label:"属性",name:"attr"},{default:y(()=>[L(t).editorState.curComponent?(c(),P(ze,{key:0})):(c(),b("p",gt,"请选择组件"))]),_:1}),S(k,{label:"动画",name:"animation"},{default:y(()=>[L(t).editorState.curComponent?(c(),b("div",bt,[S(g,{onClick:h[2]||(h[2]=m=>{n.isShowAnimation=!0})},{default:y(()=>[A("添加动画")]),_:1}),S(g,{onClick:v},{default:y(()=>[A("预览动画")]),_:1}),w("div",null,[(c(!0),b(B,null,$(L(t).editorState.curComponent.animations,(m,I)=>(c(),P(E,{key:I,closable:"",onClose:se=>r(I)},{default:y(()=>[A(K(m.label),1)]),_:2},1032,["onClose"]))),128))])])):(c(),b("p",yt,"请选择组件"))]),_:1}),S(k,{label:"事件",name:"events"},{default:y(()=>[L(t).editorState.curComponent?(c(),b("div",St,[S(g,{onClick:h[3]||(h[3]=m=>n.isShowEvent=!0)},{default:y(()=>[A("添加事件")]),_:1}),w("div",null,[(c(!0),b(B,null,$(Object.keys(L(t).editorState.curComponent.events),m=>(c(),P(E,{key:m,closable:"",onClose:I=>C(m)},{default:y(()=>[A(K(m),1)]),_:2},1032,["onClose"]))),128))])])):(c(),b("p",xt,"请选择组件"))]),_:1})]),_:1},8,["modelValue"])])]),S(ue,{show:n.isShowAnimation,"onUpdate:show":h[6]||(h[6]=m=>n.isShowAnimation=m)},{default:y(()=>[S(N,{type:"card",modelValue:n.animationActiveName,"onUpdate:modelValue":h[5]||(h[5]=m=>n.animationActiveName=m)},{default:y(()=>[(c(!0),b(B,null,$(L(he),m=>(c(),P(k,{key:m.label,label:m.label,name:m.label},{default:y(()=>[S(W,{class:"animate-container"},{default:y(()=>[w("div",wt,[(c(!0),b(B,null,$(m.children,(I,se)=>(c(),b("div",{class:"animate",key:se,onMouseover:ge=>n.hoverPreviewAnimate=I.value,onClick:ge=>l(I)},[w("div",{class:Z([n.hoverPreviewAnimate===I.value&&"animate__animated animate__"+I.value])},K(I.label),3)],40,Ct))),128))])]),_:2},1024)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["show"]),S(ue,{show:n.isShowEvent,"onUpdate:show":h[8]||(h[8]=m=>n.isShowEvent=m)},{default:y(()=>[S(N,{type:"card",modelValue:n.eventActiveName,"onUpdate:modelValue":h[7]||(h[7]=m=>n.eventActiveName=m)},{default:y(()=>[(c(!0),b(B,null,$(n.eventList,m=>(c(),P(k,{key:m.key,label:m.label,name:m.key,style:{padding:"0 20px"}},{default:y(()=>[m.key=="redirect"?(c(),P(T,{key:0,modelValue:m.param,"onUpdate:modelValue":I=>m.param=I,type:"textarea",placeholder:"请输入完整的 URL"},null,8,["modelValue","onUpdate:modelValue"])):F("",!0),m.key=="alert"?(c(),P(T,{key:1,modelValue:m.param,"onUpdate:modelValue":I=>m.param=I,type:"textarea",placeholder:"请输入要 alert 的内容"},null,8,["modelValue","onUpdate:modelValue"])):F("",!0),S(g,{style:{"margin-top":"20px"},onClick:I=>V(m.key,m.param)},{default:y(()=>[A("确定")]),_:2},1032,["onClick"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["show"]),S(De,{show:n.isShowPreview,"onUpdate:show":h[9]||(h[9]=m=>n.isShowPreview=m),onChange:_},null,8,["show"])])}}});const Lt=H(Mt,[["__scopeId","data-v-f155ec91"]]);export{Lt as default};
